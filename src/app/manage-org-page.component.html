<div class="manage-org-page" *ngIf="isLoaded">
	<a *ngIf="org?.slug" [routerLink]="['/organization', org.slug]">Back to page</a>
	<a *ngIf="!org?.slug" [routerLink]="['/organization', 'i', org._id]">Back to page</a>
	<h4>Manage {{org?.name}}</h4>
	<img [src]="org.coverImage" width="200">

  <button (click)="deleteOrg()">Delete this org</button>


<!--   <div class="giv-form" *ngIf="form?.length">
    
    <div class="giv-form-section"
        *ngFor="let section of form">
      <div class="giv-form-field"
          *ngFor="let field of section.fields">
        
        <label [attr.for]="field.model">{{field.title}}</label>
        <button (click)="section.save(field)"><i [hidden]="!loading_name" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
        <input
            *ngIf="field.element === 'input'"
            [attr.name]="field.model"
            [(ngModel)]="newOrg[field.model]"
            [placeholder]="field.placeholder || org[field.model]">
        <input
          *ngIf="field.upload"
          type="file"
          class="form-control"
          ngFileSelect
          [options]="uploads[field.model].options"
          (onUpload)="uploads[field.model].upload($event)">


      </div>
    </div>

  </div> -->


  <form [formGroup]="form" novalidate>
    
  </form>





	<div class="form-block">
		<input type="file"
			class="form-control"
  		ngFileSelect
      [options]="uploads.coverImage.options"
      (onUpload)="coverImageUpload($event)">

    <span class="upload-status" *ngIf="progress && stillWorking"><i class="fa fa-circle-o-notch fa-spin"></i></span>
    <span class="upload-status" *ngIf="progress && !stillWorking"><i class="fa fa-check"></i></span>
    <span class="editing-tip">If you want to upload a file larger than 3 MB, go <a href="http://compressjpeg.com">here for JPEGs</a> and <a href="http://tinypng.com">here for PNGs.</a></span>
  	<span class="editing-tip">If your file is publicly accessible on the Internet, simply paste the link below.</span>
  </div>
  <div class="form-block">
    <input [(ngModel)]="name"
          class="form-control"
          ngControl="name"
          name="name"
          placeholder="Change the name of your page"><button (click)="editOrg('name')"><i [hidden]="!loading_name" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
    <textarea [(ngModel)]="description"
          class="form-control"
          ngControl="description"
          name="description"
          placeholder="Change the description of your page"></textarea>
      <button (click)="editOrg('description')"><i [hidden]="!loading_name" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
    <input [(ngModel)]="avatarLink"
          class="form-control"
          name="avatarLink"
          placeholder="Change the avatar"><button (click)="editOrg('avatar', avatarLink)"><i [hidden]="!loading_avatar" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
  	<input [(ngModel)]="coverImageLink"
  				class="form-control"
  				name="coverImageLink"
  				placeholder="Change the cover image"><button (click)="editOrg('coverImage', coverImageLink)"><i [hidden]="!loading_coverImage" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
    <input [(ngModel)]="videoLink"
          class="form-control"
          name="videoLink"
          placeholder="Add a link to a youtube video"><button (click)="editOrg('videoLink')"><i [hidden]="!loading_videoLink" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
  	<input [(ngModel)]="donateLink"
  				class="form-control"
  				name="donateLink"
  				placeholder="Change the main Donate link"><button (click)="editOrg('donateLink')"><i [hidden]="!loading_donateLink" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
    <select
        (change)="editOrg('donateLinkCopy', $event.target.value)"
        [(ngModel)]="org.donateLinkCopy"
        name="donateLinkCopy"
        class="form-control">
      <option
        *ngFor="let callToAction of callsToAction"
        [value]="callToAction">{{callToAction}}</option>
    </select>
  </div>
  <div class="form-block">
    <h5>Enter up to 3 additional ways for people to help</h5>
    <div *ngFor="let otherLink of org.otherLinks; let i = index">
      <input [(ngModel)]="org.otherLinks[i].copy"
            class="form-control"
            name="otherLink{{i}}Copy"
            placeholder="Briefly describe the link">
      <input [(ngModel)]="org.otherLinks[i].href"
            class="form-control"
            name="otherLink{{i}}Href"
            placeholder="Enter the URL where you want to lead people">
    </div>
    <button (click)="editOrg('otherLinks')"><i [hidden]="!loading_donateLink" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
  	<input [(ngModel)]="slug"
  				class="form-control"
  				(keyup)="checkForUniqueSlug($event)"
  				ngControl="slug"
  				name="slug"
  				placeholder="Change your page's identifier (currently {{org.slug}})"><button [disabled]="!slugIsValid" (click)="editOrg('slug', slug)"><i [hidden]="!loading_slug" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
  <div class="form-block">
    <div *ngFor="let category of categories">
      <input
        type="checkbox"
        name="{{category.id}}"
        [checked]="orgHasCategory(category)"
        (change)="changeSelectedCategories(category, $event.target.checked)">
      <label [attr.for]="category.id">{{category.name}}</label>
    </div>
    <button (click)="editOrg('categories', org.categories)"><i [hidden]="!loading_categories" class="fa fa-circle-o-notch fa-spin"></i>Apply</button>
  </div>
	<div class="form-block">
  	<button *ngIf="!org.featured" (click)="editOrg('featured', true)">Set featured org</button>
  	<button *ngIf="org.featured" (click)="editOrg('featured', false)">Unset featured org</button>
	</div>
</div>