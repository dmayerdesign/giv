<div class="clearfix posts-container" [attr.id]="!isBrowsing ? 'posts' : null" [ngClass]="{'posts-by-org': org, 'browsing': isBrowsing}">

	<h4 *ngIf="org && isBrowsing">What they're up to</h4>
	<h2 *ngIf="!org || !isBrowsing">What they're up to</h2>
	<p *ngIf="!org" class="subtitle">See where your money's going</p>
	<search-box
		class="search-box-container clearfix"
		*ngIf="(!org?._id || !isBrowsing) && !isLoading"
		(update)="searchPosts($event)"
		(focusChange)="toggleSearchBoxFocus($event)"
		[ngClass]="{focused: searchBoxIsFocused}"
		[collection]="searchPlaceholder"></search-box>

	<create-post *ngIf="org && user && userHasPermission(org) && !isBrowsing" [org]="org" [user]="user" (update)="updatePosts($event)"></create-post>
	
	<!-- Posts -->
	<section *ngIf="!viewingOne && !loadingPosts" class="posts col-md-12">
		<div #singlePost
				class="post clearfix"
				[ngClass]="{'has-featured-image': post?.featuredImage?.length}"
				*ngFor="let post of posts"
				(click)="selectPost(post._id)">
			<div *ngIf="!org" [ngStyle]="{'background-image': 'url(' + orgAvatars[post._id] + ')'}" class="post-avatar bg-image"></div>
			<div class="post-inner">
				<h5 class="post-title">{{post.title}}</h5>
				<p class="post-content">{{post.content | truncate:100}}</p>
			</div>
		</div>
		<div class="null-search" *ngIf="posts.length === 0">
				No posts to show. Try broadening your search.
		</div>

		<button *ngIf="posts.length > 19" id="show-more" class="row btn btn-default" (click)="showMore(10, posts.length)">Show more</button>
	</section>

	<!-- View Post -->
	<section *ngIf="viewingOne && selectedPost" class="col-md-12">
		<a (click)="deselectPost()" [routerLink]="['/organization/i', org?._id]">Back to posts</a>
		<img *ngIf="selectedPost?.featuredImage?.length" [src]="selectedPost.featuredImage" width="100">
		<h5>{{selectedPost.title}}</h5>
	</section>

</div>